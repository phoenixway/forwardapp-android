TABLE OF CONTENTS
================================================================================

- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2](##<<FILE_1>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Button.kt](##<<FILE_2>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Controller.kt](##<<FILE_3>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Geometry.kt](##<<FILE_4>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Models.kt](##<<FILE_5>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Overlay.kt](##<<FILE_6>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Popup.kt](##<<FILE_7>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2State.kt](##<<FILE_8>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2](##<<FILE_9>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Button.kt](##<<FILE_10>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Controller.kt](##<<FILE_11>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Geometry.kt](##<<FILE_12>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Models.kt](##<<FILE_13>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Overlay.kt](##<<FILE_14>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Popup.kt](##<<FILE_15>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2State.kt](##<<FILE_16>>)
- [/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/docs/HoldMenu2-manual.md](##<<FILE_17>>)

================================================================================

## <<FILE_1>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2 (ID: FILE_1)
================================================================================

[–ü–æ–º–∏–ª–∫–∞ —á–∏—Ç–∞–Ω–Ω—è —Ñ–∞–π–ª—É /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2: [Errno 21] Is a directory: '/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2']


================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2
================================================================================

## <<FILE_2>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Button.kt (ID: FILE_2)
================================================================================

package com.romankozak.forwardappmobile.features.common.components.holdmenu2

import android.util.Log
import androidx.compose.foundation.gestures.awaitEachGesture
import androidx.compose.foundation.gestures.awaitFirstDown
import androidx.compose.foundation.layout.Box
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.geometry.Offset
import androidx.compose.ui.input.pointer.PointerEventPass
import androidx.compose.ui.input.pointer.pointerInput
import androidx.compose.ui.layout.onGloballyPositioned
import androidx.compose.ui.layout.positionInWindow
import androidx.compose.ui.platform.LocalConfiguration
import androidx.compose.ui.platform.LocalDensity
import kotlin.compareTo
import androidx.compose.ui.unit.dp


/**
 * –ö–Ω–æ–ø–∫–∞ –∑ long-press –º–µ–Ω—é —Ç–∞ drag-to-select —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—é
 *
 * @param items –°–ø–∏—Å–æ–∫ –ø—É–Ω–∫—Ç—ñ–≤ –º–µ–Ω—é –∑ —ñ–∫–æ–Ω–∫–∞–º–∏
 * @param onSelect Callback –ø—Ä–∏ –≤–∏–±–æ—Ä—ñ –ø—É–Ω–∫—Ç—É (–ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —ñ–Ω–¥–µ–∫—Å)
 * @param modifier Modifier –¥–ª—è –∫–Ω–æ–ø–∫–∏
 * @param controller –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä (—Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —è–∫—â–æ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–æ)
 * @param longPressDuration –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å —É—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–µ–Ω—é (–º—Å)
 * @param onTap Callback –¥–ª—è –æ–¥–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ç–∞–ø—É (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
 * @param iconPosition –ü–æ–∑–∏—Ü—ñ—è —ñ–∫–æ–Ω–∫–∏ (START/END)
 * @param menuAlignment –í–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç—É –≤ –º–µ–Ω—é
 * @param content –í–º—ñ—Å—Ç –∫–Ω–æ–ø–∫–∏
 */
@Composable
fun HoldMenu2Button(
    items: List<HoldMenuItem>,
    onSelect: (Int) -> Unit,
    modifier: Modifier = Modifier,
    controller: HoldMenu2Controller = rememberHoldMenu2(),
    longPressDuration: Long = 400,
    onTap: (() -> Unit)? = null,
    iconPosition: IconPosition = IconPosition.START,
    menuAlignment: MenuAlignment = MenuAlignment.START,
    content: @Composable () -> Unit
) {
    val density = LocalDensity.current
    val configuration = LocalConfiguration.current
    val screenWidth = with(density) { configuration.screenWidthDp.dp.toPx() }
    val screenHeight = with(density) { configuration.screenHeightDp.dp.toPx() }

    var buttonAnchor by remember { mutableStateOf(Offset.Zero) }

    // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ä–æ–∑–º—ñ—Ä–∏ –µ–∫—Ä–∞–Ω—É –≤ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä
    LaunchedEffect(screenWidth, screenHeight) {
        controller.setScreenDimensions(screenWidth, screenHeight, density)
    }

    Box(
        modifier = modifier
            .onGloballyPositioned { coords ->
                val pos = coords.positionInWindow()
                val size = coords.size
                buttonAnchor = Offset(
                    pos.x + size.width / 2f,
                    pos.y + size.height / 2f
                )
            }
            .pointerInput(items, onSelect, onTap) {
                awaitEachGesture {
                    val down = awaitFirstDown(requireUnconsumed = false)

                    // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –Ω–∞—Ç–∏—Å–Ω—É–ª–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É
                    if (!HoldMenu2Geometry.isInsideButton(down.position, Offset(size.width / 2f, size.height / 2f))) {
                        return@awaitEachGesture
                    }

                    Log.e("HOLDMENU2", "üëá Finger on button")

                    // –ß–µ–∫–∞—î–º–æ long press
                    val longPress = withTimeoutOrNull(longPressDuration) {
                        awaitPointerEvent(PointerEventPass.Main)
                        null
                    }

                    if (longPress == null) {
                        // Long press –≤–∏–∫–æ–Ω–∞–≤—Å—è - –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –º–µ–Ω—é
                        Log.e("HOLDMENU2", "üî• Opening menu")

                        // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –≥–ª–æ–±–∞–ª—å–Ω—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –¥–ª—è anchor
                        val globalAnchor = buttonAnchor
                        val globalTouch = Offset(
                            buttonAnchor.x + down.position.x - size.width / 2f,
                            buttonAnchor.y + down.position.y - size.height / 2f
                        )

                        controller.open(
                            anchor = globalAnchor,
                            touch = globalTouch,
                            items = items,
                            onSelect = onSelect,
                            iconPosition = iconPosition,
                            menuAlignment = menuAlignment,
                        )

                        // –û–±—Ä–æ–±–ª—è—î–º–æ drag
                        var currentPos = globalTouch

                        while (true) {
                            val event = awaitPointerEvent(PointerEventPass.Main)
                            val change = event.changes.firstOrNull() ?: break

                            // –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –ª–æ–∫–∞–ª—å–Ω—É –ø–æ–∑–∏—Ü—ñ—é –≤ –≥–ª–æ–±–∞–ª—å–Ω—É
                            currentPos = Offset(
                                buttonAnchor.x + change.position.x - size.width / 2f,
                                buttonAnchor.y + change.position.y - size.height / 2f
                            )

                            // –û–Ω–æ–≤–ª—é—î–º–æ hover
                            controller.updateHover(currentPos)

                            // –í—ñ–¥–ø—É—Å—Ç–∏–ª–∏ - –≤–∏–∫–æ–Ω—É—î–º–æ action
                            if (!change.pressed) {
                                val hover = controller.state.hoverIndex
                                Log.e("HOLDMENU2", "‚úÖ Released on: $hover")
                                if (hover >= 0) {
                                    onSelect(hover)
                                }
                                controller.close()
                                break
                            }

                            change.consume()
                        }
                    } else {
                        // –ù–µ long press - –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ —Ü–µ –ø—Ä–æ—Å—Ç–∏–π —Ç–∞–ø
                        var wasDrag = false
                        val initialPos = down.position

                        while (true) {
                            val event = awaitPointerEvent(PointerEventPass.Main)
                            val change = event.changes.firstOrNull() ?: break

                            // –Ø–∫—â–æ –ø–∞–ª–µ—Ü—å —Ä—É—Ö–∞–≤—Å—è –±—ñ–ª—å—à–µ –Ω—ñ–∂ –Ω–∞ 10px - —Ü–µ –Ω–µ —Ç–∞–ø
                            if ((change.position - initialPos).getDistance() > 10f) {
                                wasDrag = true
                            }

                            if (!change.pressed) {
                                if (!wasDrag) {
                                    // –¶–µ –±—É–≤ –ø—Ä–æ—Å—Ç–∏–π —Ç–∞–ø
                                    Log.e("HOLDMENU2", "üëÜ Single tap")
                                    onTap?.invoke()
                                }
                                break
                            }

                            change.consume()
                        }
                    }
                }
            }
    ) {
        content()
    }
}

================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Button.kt
================================================================================

## <<FILE_3>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Controller.kt (ID: FILE_3)
================================================================================

package com.romankozak.forwardappmobile.features.common.components.holdmenu2

import android.util.Log
import androidx.compose.runtime.*
import androidx.compose.ui.geometry.Offset
import androidx.compose.ui.unit.Density

@Stable
class HoldMenu2Controller {
    var state by mutableStateOf(HoldMenu2State())
        private set

    private var screenWidth: Float = 0f
    private var screenHeight: Float = 0f
    private var density: Density? = null

    fun setScreenDimensions(width: Float, height: Float, density: Density) {
        this.screenWidth = width
        this.screenHeight = height
        this.density = density
    }

    fun open(
        anchor: Offset,
        touch: Offset,
        items: List<HoldMenuItem>,
        onSelect: (Int) -> Unit,
        iconPosition: IconPosition = IconPosition.START,
        menuAlignment: MenuAlignment = MenuAlignment.START,
    ) {
        Log.e("HOLDMENU2", "üìù Controller.open() called, items=${items.size}")

        val currentDensity = density
        if (currentDensity == null || screenWidth == 0f || screenHeight == 0f) {
            Log.e("HOLDMENU2", "‚ö†Ô∏è Screen dimensions not set!")
            return
        }

        // –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ layout –º–µ–Ω—é
        val layout = HoldMenu2Geometry.calculateMenuLayout(
            anchor = anchor,
            itemCount = items.size,
            density = currentDensity,
            screenWidth = screenWidth,
            screenHeight = screenHeight,
        )

        // –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π hover
        val initialHover = HoldMenu2Geometry.calculateHoverIndex(
            fingerPosition = touch,
            layout = layout,
            itemCount = items.size,
        )

        state = state.copy(
            isOpen = true,
            anchor = anchor,
            touch = touch,
            items = items,
            onItemSelected = onSelect,
            hoverIndex = initialHover,
            layout = layout,
            iconPosition = iconPosition,
            menuAlignment = menuAlignment,
        )

        Log.e("HOLDMENU2", "üìù State updated: isOpen=${state.isOpen}, items=${state.items.size}, hover=$initialHover")
    }

    fun updateHover(fingerPosition: Offset) {
        val layout = state.layout ?: return

        val newHover = HoldMenu2Geometry.calculateHoverIndex(
            fingerPosition = fingerPosition,
            layout = layout,
            itemCount = state.items.size,
        )

        if (state.hoverIndex != newHover) {
            Log.e("HOLDMENU2", "üéØ Hover: $newHover (pos=$fingerPosition)")
            state = state.copy(hoverIndex = newHover)
        }
    }

    fun close() {
        Log.e("HOLDMENU2", "üìù Controller.close() called")
        state = state.copy(isOpen = false, hoverIndex = -1)
    }
}

@Composable
fun rememberHoldMenu2(): HoldMenu2Controller {
    return remember { HoldMenu2Controller() }
}

================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Controller.kt
================================================================================

## <<FILE_4>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Geometry.kt (ID: FILE_4)
================================================================================

package com.romankozak.forwardappmobile.features.common.components.holdmenu2

import androidx.compose.ui.geometry.Offset
import androidx.compose.ui.unit.Density
import androidx.compose.ui.unit.Dp
import androidx.compose.ui.unit.IntOffset
import androidx.compose.ui.unit.dp

/**
 * –£—Ç–∏–ª—ñ—Ç–∞ –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ø–æ–∑–∏—Ü—ñ—ó –º–µ–Ω—é –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º —Ä—ñ–∑–Ω–∏—Ö –∫—Ä–∞–π–Ω—ñ—Ö –≤–∏–ø–∞–¥–∫—ñ–≤
 */
object HoldMenu2Geometry {
    
    data class MenuLayout(
        val menuTopLeft: IntOffset,
        val menuWidth: Float,
        val menuHeight: Float,
        val itemHeight: Float,
    )
    
    /**
     * –†–æ–∑—Ä–∞—Ö–æ–≤—É—î –æ–ø—Ç–∏–º–∞–ª—å–Ω—É –ø–æ–∑–∏—Ü—ñ—é –º–µ–Ω—é –≤—ñ–¥–Ω–æ—Å–Ω–æ –∫–Ω–æ–ø–∫–∏-—è–∫–æ—Ä—è
     * 
     * @param anchor –¶–µ–Ω—Ç—Ä –∫–Ω–æ–ø–∫–∏ –≤ window coordinates
     * @param itemCount –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—É–Ω–∫—Ç—ñ–≤ –º–µ–Ω—é
     * @param density Density –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó dp –≤ px
     * @param screenWidth –®–∏—Ä–∏–Ω–∞ –µ–∫—Ä–∞–Ω—É –≤ px
     * @param screenHeight –í–∏—Å–æ—Ç–∞ –µ–∫—Ä–∞–Ω—É –≤ px
     * @param menuWidth –®–∏—Ä–∏–Ω–∞ –º–µ–Ω—é
     * @param itemHeight –í–∏—Å–æ—Ç–∞ –æ–¥–Ω–æ–≥–æ –ø—É–Ω–∫—Ç—É
     * @param gap –í—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ –∫–Ω–æ–ø–∫–∏ –¥–æ –º–µ–Ω—é
     * @param edgePadding –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –≤—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ –∫—Ä–∞—ó–≤ –µ–∫—Ä–∞–Ω—É
     */
    fun calculateMenuLayout(
        anchor: Offset,
        itemCount: Int,
        density: Density,
        screenWidth: Float,
        screenHeight: Float,
        menuWidth: Dp = 220.dp,
        itemHeight: Dp = 48.dp,
        gap: Dp = 16.dp,
        edgePadding: Dp = 8.dp,
    ): MenuLayout {
        with(density) {
            val menuWidthPx = menuWidth.toPx()
            val itemHeightPx = itemHeight.toPx()
            val menuHeightPx = itemHeightPx * itemCount
            val gapPx = gap.toPx()
            val edgePx = edgePadding.toPx()
            
            // 1. –°–ø—Ä–æ–±—É—î–º–æ —Ä–æ–∑–º—ñ—Å—Ç–∏—Ç–∏ –º–µ–Ω—é –∑–≤–µ—Ä—Ö—É –≤—ñ–¥ –∫–Ω–æ–ø–∫–∏ (preferred)
            var menuX = anchor.x - menuWidthPx / 2f
            var menuY = anchor.y - menuHeightPx - gapPx
            
            // 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—ñ
            when {
                // –ú–µ–Ω—é –≤–∏—Ö–æ–¥–∏—Ç—å –∑–∞ –≤–µ—Ä—Ö –µ–∫—Ä–∞–Ω—É - —Ä–æ–∑–º—ñ—â—É—î–º–æ –∑–Ω–∏–∑—É
                menuY < edgePx -> {
                    menuY = anchor.y + gapPx
                    
                    // –Ø–∫—â–æ —ñ –∑–Ω–∏–∑—É –Ω–µ –≤–º—ñ—â–∞—î—Ç—å—Å—è - –ø—Ä–∏—Ç–∏—Å–∫–∞—î–º–æ –¥–æ –Ω–∏–∑—É
                    if (menuY + menuHeightPx > screenHeight - edgePx) {
                        menuY = (screenHeight - menuHeightPx - edgePx).coerceAtLeast(edgePx)
                    }
                }
                // –ú–µ–Ω—é –≤–∏—Ö–æ–¥–∏—Ç—å –∑–∞ –Ω–∏–∑ –µ–∫—Ä–∞–Ω—É - –ø—Ä–∏—Ç–∏—Å–∫–∞—î–º–æ –¥–æ –Ω–∏–∑—É
                menuY + menuHeightPx > screenHeight - edgePx -> {
                    menuY = (screenHeight - menuHeightPx - edgePx).coerceAtLeast(edgePx)
                }
            }
            
            // 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—ñ
            when {
                // –ú–µ–Ω—é –≤–∏—Ö–æ–¥–∏—Ç—å –∑–∞ –ª—ñ–≤—É –º–µ–∂—É - –ø—Ä–∏—Ç–∏—Å–∫–∞—î–º–æ –¥–æ –ª—ñ–≤–æ–≥–æ –∫—Ä–∞—é
                menuX < edgePx -> {
                    menuX = edgePx
                }
                // –ú–µ–Ω—é –≤–∏—Ö–æ–¥–∏—Ç—å –∑–∞ –ø—Ä–∞–≤—É –º–µ–∂—É - –ø—Ä–∏—Ç–∏—Å–∫–∞—î–º–æ –¥–æ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—é
                menuX + menuWidthPx > screenWidth - edgePx -> {
                    menuX = (screenWidth - menuWidthPx - edgePx).coerceAtLeast(edgePx)
                }
            }
            
            return MenuLayout(
                menuTopLeft = IntOffset(menuX.toInt(), menuY.toInt()),
                menuWidth = menuWidthPx,
                menuHeight = menuHeightPx,
                itemHeight = itemHeightPx,
            )
        }
    }
    
    /**
     * –†–æ–∑—Ä–∞—Ö–æ–≤—É—î —ñ–Ω–¥–µ–∫—Å –ø—É–Ω–∫—Ç—É –º–µ–Ω—é, –Ω–∞ —è–∫–∏–π –≤–∫–∞–∑—É—î –ø–∞–ª–µ—Ü—å
     * 
     * @param fingerPosition –ü–æ–∑–∏—Ü—ñ—è –ø–∞–ª—å—Ü—è –≤ window coordinates
     * @param layout –†–æ–∑–∫–ª–∞–¥–∫–∞ –º–µ–Ω—é
     * @return –Ü–Ω–¥–µ–∫—Å –ø—É–Ω–∫—Ç—É (0..itemCount-1) –∞–±–æ -1 —è–∫—â–æ –ø–∞–ª–µ—Ü—å –ø–æ–∑–∞ –º–µ–Ω—é
     */
    fun calculateHoverIndex(
        fingerPosition: Offset,
        layout: MenuLayout,
        itemCount: Int,
    ): Int {
        val relativeX = fingerPosition.x - layout.menuTopLeft.x
        val relativeY = fingerPosition.y - layout.menuTopLeft.y
        
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ –ø–∞–ª–µ—Ü—å –≤ –º–µ–∂–∞—Ö –º–µ–Ω—é
        if (relativeX < 0 || relativeX > layout.menuWidth ||
            relativeY < 0 || relativeY > layout.menuHeight) {
            return -1
        }
        
        // –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ —ñ–Ω–¥–µ–∫—Å –ø—É–Ω–∫—Ç—É
        val index = (relativeY / layout.itemHeight).toInt()
        return index.coerceIn(0, itemCount - 1)
    }
    
    /**
     * –ü–µ—Ä–µ–≤—ñ—Ä—è—î —á–∏ –ø–æ–∑–∏—Ü—ñ—è –≤ –º–µ–∂–∞—Ö –∫–Ω–æ–ø–∫–∏ (–¥–ª—è –¥–µ—Ç–µ–∫—Ü—ñ—ó long press)
     */
    fun isInsideButton(
        position: Offset,
        buttonCenter: Offset,
        buttonRadius: Float = 100f
    ): Boolean {
        return (position - buttonCenter).getDistance() < buttonRadius
    }
}


================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Geometry.kt
================================================================================

## <<FILE_5>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Models.kt (ID: FILE_5)
================================================================================

package com.romankozak.forwardappmobile.features.common.components.holdmenu2

import androidx.compose.ui.graphics.vector.ImageVector

/**
 * –ü—É–Ω–∫—Ç –º–µ–Ω—é –∑ —ñ–∫–æ–Ω–∫–æ—é —Ç–∞ —Ç–µ–∫—Å—Ç–æ–º
 */
data class HoldMenuItem(
    val label: String,
    val icon: ImageVector? = null,
    val id: String = label,
)

/**
 * –ü–æ–∑–∏—Ü—ñ—è —ñ–∫–æ–Ω–∫–∏ –≤—ñ–¥–Ω–æ—Å–Ω–æ —Ç–µ–∫—Å—Ç—É
 */
enum class IconPosition {
    START,  // –Ü–∫–æ–Ω–∫–∞ –∑–ª—ñ–≤–∞, —Ç–µ–∫—Å—Ç —Å–ø—Ä–∞–≤–∞
    END,    // –¢–µ–∫—Å—Ç –∑–ª—ñ–≤–∞, —ñ–∫–æ–Ω–∫–∞ —Å–ø—Ä–∞–≤–∞
}

/**
 * –†–µ–∂–∏–º –≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç—É –≤ –ø—É–Ω–∫—Ç—ñ –º–µ–Ω—é
 */
enum class MenuAlignment {
    START,   // –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–∏—Ç–∏—Å–Ω—É—Ç–∏–π –¥–æ –ª—ñ–≤–æ–≥–æ –∫—Ä–∞—é
    END,     // –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–∏—Ç–∏—Å–Ω—É—Ç–∏–π –¥–æ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—é
    CENTER,  // –ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ —Ü–µ–Ω—Ç—Ä—É
}

================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Models.kt
================================================================================

## <<FILE_6>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Overlay.kt (ID: FILE_6)
================================================================================

package com.romankozak.forwardappmobile.features.common.components.holdmenu2

import android.util.Log
import androidx.compose.animation.AnimatedVisibility
import androidx.compose.animation.core.tween
import androidx.compose.animation.fadeIn
import androidx.compose.animation.fadeOut
import androidx.compose.foundation.background
import androidx.compose.foundation.layout.*
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.draw.blur
import androidx.compose.ui.unit.dp
import com.romankozak.forwardappmobile.ui.theme.LocalHoldMenuColors
@Composable
fun HoldMenu2Overlay(
    controller: HoldMenu2Controller,
    modifier: Modifier = Modifier
) {
    val state = controller.state
    val holdMenuColors = LocalHoldMenuColors.current

    AnimatedVisibility(
        visible = state.isOpen && state.items.isNotEmpty(),
        enter = fadeIn(tween(150)),
        exit = fadeOut(tween(100)),
    ) {
        Log.e("HOLDMENU2", "üìç Overlay: rendering popup")

        Box(modifier = modifier.fillMaxSize()) {

            // --- BACKDROP (blur only background, not popup) ---
            Box(
                Modifier
                    .fillMaxSize()
                    .background(holdMenuColors.scrim)
                    .blur(18.dp)
            )

            // --- POPUP ON TOP ---
            HoldMenu2Popup(state)
        }
    }
}


================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Overlay.kt
================================================================================

## <<FILE_7>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Popup.kt (ID: FILE_7)
================================================================================

package com.romankozak.forwardappmobile.features.common.components.holdmenu2

import android.util.Log
import androidx.compose.animation.AnimatedVisibility
import androidx.compose.animation.core.*
import androidx.compose.animation.fadeIn
import androidx.compose.animation.fadeOut
import androidx.compose.animation.scaleIn
import androidx.compose.animation.scaleOut
import androidx.compose.foundation.background
import androidx.compose.foundation.border
import androidx.compose.foundation.layout.*
import androidx.compose.foundation.shape.RoundedCornerShape
import androidx.compose.material3.Icon
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.draw.scale
import androidx.compose.ui.draw.shadow
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.graphics.TransformOrigin
import androidx.compose.ui.graphics.graphicsLayer
import androidx.compose.ui.platform.LocalDensity
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.Dp
import androidx.compose.ui.unit.IntOffset
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import kotlin.compareTo
import com.romankozak.forwardappmobile.ui.theme.HoldMenuColors
import com.romankozak.forwardappmobile.ui.theme.LocalHoldMenuColors

@Composable
fun HoldMenu2Popup(state: HoldMenu2State) {
    val layout = state.layout ?: return

    Log.e("HOLDMENU2", "üé® Popup rendering, items=${state.items.size}, hover=${state.hoverIndex}")

    val density = LocalDensity.current
    val menuWidth = with(density) { layout.menuWidth.toDp() }
    val itemHeight = with(density) { layout.itemHeight.toDp() }
    val holdMenuColors = LocalHoldMenuColors.current

    val scale by animateFloatAsState(
        targetValue = if (state.isOpen) 1f else 0.92f,
        animationSpec = spring(
            dampingRatio = Spring.DampingRatioMediumBouncy,
            stiffness = Spring.StiffnessLow
        ),
        label = "menu_scale"
    )

    val alpha by animateFloatAsState(
        targetValue = if (state.isOpen) 1f else 0f,
        animationSpec = tween(150),
        label = "menu_alpha"
    )

    Box(
        modifier = Modifier
            .offset { layout.menuTopLeft }
            .graphicsLayer {
                this.alpha = alpha
                scaleX = scale
                scaleY = scale
                transformOrigin = TransformOrigin.Center
            }
            .width(menuWidth)
            .shadow(
                elevation = 20.dp,
                shape = RoundedCornerShape(22.dp),
                ambientColor = Color.Black.copy(alpha = 0.35f),
                spotColor = Color.Black.copy(alpha = 0.45f)
            )
            .background(
                color = holdMenuColors.background,
                shape = RoundedCornerShape(22.dp)
            )

            .border(
                width = 1.dp,
                color = holdMenuColors.border,
                shape = RoundedCornerShape(22.dp)
            )
            .padding(vertical = 8.dp)
    ) {
        Column(
            verticalArrangement = Arrangement.Top,
            horizontalAlignment = when (state.menuAlignment) {
                MenuAlignment.START -> Alignment.Start
                MenuAlignment.CENTER -> Alignment.CenterHorizontally
                MenuAlignment.END -> Alignment.End
            },
            modifier = Modifier.fillMaxWidth()
        ) {
            state.items.forEachIndexed { index, item ->
                MenuItemRow(
                    item = item,
                    isHover = index == state.hoverIndex,
                    itemHeight = itemHeight,
                    iconPosition = state.iconPosition,
                    menuAlignment = state.menuAlignment,
                    colors = holdMenuColors
                )
            }
        }
    }
}


@Composable
private fun MenuItemRow(
    item: HoldMenuItem,
    isHover: Boolean,
    itemHeight: Dp,
    iconPosition: IconPosition,
    menuAlignment: MenuAlignment,
    colors: HoldMenuColors,
) {
    // –ë–µ–∑ scale!
    val offsetX by animateDpAsState(
        targetValue = if (isHover) 6.dp else 0.dp,
        animationSpec = tween(90),
        label = "offset"
    )

    val backgroundColor = if (isHover) colors.itemHoverBackground else Color.Transparent

    val textColor = if (isHover) colors.itemText else colors.itemTextMuted

    val fontWeight =
        if (isHover) FontWeight.SemiBold else FontWeight.Medium

    Box(
        modifier = Modifier
            .fillMaxWidth()
            .height(itemHeight)
            .offset(x = offsetX)
            .padding(horizontal = 6.dp, vertical = 4.dp)
            .background(backgroundColor, RoundedCornerShape(14.dp)),
        contentAlignment = when (menuAlignment) {
            MenuAlignment.START -> Alignment.CenterStart
            MenuAlignment.END -> Alignment.CenterEnd
            MenuAlignment.CENTER -> Alignment.Center
        }
    ) {
        Row(
            horizontalArrangement = Arrangement.spacedBy(12.dp),
            verticalAlignment = Alignment.CenterVertically,
            modifier = Modifier.padding(horizontal = 14.dp)
        ) {
            if (iconPosition == IconPosition.START)
                item.icon?.let {
                    Icon(
                        imageVector = it,
                        contentDescription = null,
                        tint = textColor,
                        modifier = Modifier.size(20.dp)
                    )
                }

            Text(
                item.label,
                color = textColor,
                fontSize = 15.sp,
                fontWeight = fontWeight
            )

            if (iconPosition == IconPosition.END)
                item.icon?.let {
                    Icon(
                        imageVector = it,
                        contentDescription = null,
                        tint = textColor,
                        modifier = Modifier.size(20.dp)
                    )
                }
        }
    }
}


@Composable
private fun IOSStyleHoverLabel(
    state: HoldMenu2State,
    menuWidth: Dp,
    itemHeight: Dp,
    colors: HoldMenuColors,
) {
    val density = LocalDensity.current
    val hoverIndex = state.hoverIndex

    AnimatedVisibility(
        visible = hoverIndex in 0 until state.items.size,
        enter = fadeIn(tween(150)) + scaleIn(
            initialScale = 0.8f,
            animationSpec = spring(dampingRatio = Spring.DampingRatioMediumBouncy)
        ),
        exit = fadeOut(tween(100)) + scaleOut(targetScale = 0.8f),
    ) {
        if (hoverIndex in 0 until state.items.size) {
            val item = state.items[hoverIndex]
            val offsetY = with(density) { (itemHeight * hoverIndex + itemHeight / 2).toPx() }

            Box(
                modifier = Modifier
                    .offset { IntOffset(-(menuWidth.value.toInt() + 16), offsetY.toInt()) }
                    .wrapContentSize(),
                contentAlignment = Alignment.CenterEnd
            ) {
                // iOS-like bubble –∑–ª—ñ–≤–∞ –≤—ñ–¥ –º–µ–Ω—é
                Box(
                    modifier = Modifier
                        .shadow(
                            elevation = 8.dp,
                            shape = RoundedCornerShape(12.dp),
                            ambientColor = Color.Black.copy(alpha = 0.2f)
                        )
                        .background(
                            colors.tooltipBackground,
                            RoundedCornerShape(12.dp)
                        )
                        .padding(horizontal = 16.dp, vertical = 8.dp)
                ) {
                    Text(
                        text = item.label,
                        color = colors.tooltipText,
                        fontSize = 14.sp,
                        fontWeight = FontWeight.Medium,
                    )
                }
            }
        }
    }
}


================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Popup.kt
================================================================================

## <<FILE_8>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2State.kt (ID: FILE_8)
================================================================================

package com.romankozak.forwardappmobile.features.common.components.holdmenu2

import androidx.compose.ui.geometry.Offset

data class HoldMenu2State(
    val isOpen: Boolean = false,
    val anchor: Offset = Offset.Zero,
    val touch: Offset = Offset.Zero,
    val items: List<HoldMenuItem> = emptyList(),
    val hoverIndex: Int = -1,
    val onItemSelected: ((Int) -> Unit)? = null,
    val layout: HoldMenu2Geometry.MenuLayout? = null,
    val iconPosition: IconPosition = IconPosition.START,
    val menuAlignment: MenuAlignment = MenuAlignment.START,
)

================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/app/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2State.kt
================================================================================

## <<FILE_9>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2 (ID: FILE_9)
================================================================================

[–ü–æ–º–∏–ª–∫–∞ —á–∏—Ç–∞–Ω–Ω—è —Ñ–∞–π–ª—É /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2: [Errno 21] Is a directory: '/home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2']


================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2
================================================================================

## <<FILE_10>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Button.kt (ID: FILE_10)
================================================================================

package com.romankozak.forwardappmobile.features.common.components.holdmenu2

import android.util.Log
import androidx.compose.foundation.gestures.awaitEachGesture
import androidx.compose.foundation.gestures.awaitFirstDown
import androidx.compose.foundation.layout.Box
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.geometry.Offset
import androidx.compose.ui.input.pointer.PointerEventPass
import androidx.compose.ui.input.pointer.pointerInput
import androidx.compose.ui.layout.onGloballyPositioned
import androidx.compose.ui.layout.positionInWindow
import androidx.compose.ui.platform.LocalConfiguration
import androidx.compose.ui.platform.LocalDensity
import kotlin.compareTo
import androidx.compose.ui.unit.dp


/**
 * –ö–Ω–æ–ø–∫–∞ –∑ long-press –º–µ–Ω—é —Ç–∞ drag-to-select —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—é
 * + –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –∑–≤–∏—á–∞–π–Ω–æ–≥–æ —Ç–∞–ø—É –ø–æ –µ–ª–µ–º–µ–Ω—Ç–∞—Ö –º–µ–Ω—é –ø—ñ—Å–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è
 */
@Composable
fun HoldMenu2Button(
    items: List<HoldMenuItem>,
    onSelect: (Int) -> Unit,
                    modifier: Modifier = Modifier,
                    controller: HoldMenu2Controller = rememberHoldMenu2(),
                    longPressDuration: Long = 400,
                    onTap: (() -> Unit)? = null,
                    iconPosition: IconPosition = IconPosition.START,
                    menuAlignment: MenuAlignment = MenuAlignment.START,
                    content: @Composable () -> Unit
) {
    val density = LocalDensity.current
    val configuration = LocalConfiguration.current
    val screenWidth = with(density) { configuration.screenWidthDp.dp.toPx() }
    val screenHeight = with(density) { configuration.screenHeightDp.dp.toPx() }

    var buttonAnchor by remember { mutableStateOf(Offset.Zero) }

    // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ä–æ–∑–º—ñ—Ä–∏ –µ–∫—Ä–∞–Ω—É –≤ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä
    LaunchedEffect(screenWidth, screenHeight) {
        controller.setScreenDimensions(screenWidth, screenHeight, density)
    }

    Box(
        modifier = modifier
        .onGloballyPositioned { coords ->
            val pos = coords.positionInWindow()
            val size = coords.size
            buttonAnchor = Offset(
                pos.x + size.width / 2f,
                pos.y + size.height / 2f
            )
        }
        .pointerInput(items, onSelect, onTap) {
            awaitEachGesture {
                val down = awaitFirstDown(requireUnconsumed = false)

                // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –Ω–∞—Ç–∏—Å–Ω—É–ª–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É
                if (!HoldMenu2Geometry.isInsideButton(down.position, Offset(size.width / 2f, size.height / 2f))) {
                    return@awaitEachGesture
                }

                Log.e("HOLDMENU2", "üëá Finger on button")

                // –ß–µ–∫–∞—î–º–æ long press
                val longPress = withTimeoutOrNull(longPressDuration) {
                    awaitPointerEvent(PointerEventPass.Main)
                    null
                }

                if (longPress == null) {
                    // Long press –≤–∏–∫–æ–Ω–∞–≤—Å—å - –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –º–µ–Ω—é
                    Log.e("HOLDMENU2", "üî• Opening menu (long press)")

                    // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –≥–ª–æ–±–∞–ª—å–Ω—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –¥–ª—è anchor
                    val globalAnchor = buttonAnchor
                    val globalTouch = Offset(
                        buttonAnchor.x + down.position.x - size.width / 2f,
                        buttonAnchor.y + down.position.y - size.height / 2f
                    )

                    controller.open(
                        anchor = globalAnchor,
                        touch = globalTouch,
                        items = items,
                        onSelect = onSelect,
                        iconPosition = iconPosition,
                        menuAlignment = menuAlignment,
                        isDragMode = true  // Long press = drag mode
                    )

                    // –û–±—Ä–æ–±–ª—è—î–º–æ drag
                    var currentPos = globalTouch

                    while (true) {
                        val event = awaitPointerEvent(PointerEventPass.Main)
                        val change = event.changes.firstOrNull() ?: break

                        // –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –ª–æ–∫–∞–ª—å–Ω—É –ø–æ–∑–∏—Ü—ñ—é –≤ –≥–ª–æ–±–∞–ª—å–Ω—É
                        currentPos = Offset(
                            buttonAnchor.x + change.position.x - size.width / 2f,
                            buttonAnchor.y + change.position.y - size.height / 2f
                        )

                        // –û–Ω–æ–≤–ª—é—î–º–æ hover
                        controller.updateHover(currentPos)

                        // –í—ñ–¥–ø—É—Å—Ç–∏–ª–∏ - –≤–∏–∫–æ–Ω—É—î–º–æ action
                        if (!change.pressed) {
                            val hover = controller.state.hoverIndex
                            Log.e("HOLDMENU2", "‚úÖ Released on: $hover")
                            if (hover >= 0) {
                                onSelect(hover)
                            }
                            controller.close()
                            break
                        }

                        change.consume()
                    }
                } else {
                    // –ù–µ long press - –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ —Ü–µ –ø—Ä–æ—Å—Ç–∏–π —Ç–∞–ø
                    var wasDrag = false
                    val initialPos = down.position

                    while (true) {
                        val event = awaitPointerEvent(PointerEventPass.Main)
                        val change = event.changes.firstOrNull() ?: break

                        // –Ø–∫—â–æ –ø–∞–ª–µ—Ü—å —Ä—É—Ö–∞–≤—Å—è –±—ñ–ª—å—à–µ –Ω—ñ–∂ –Ω–∞ 10px - —Ü–µ –Ω–µ —Ç–∞–ø
                        if ((change.position - initialPos).getDistance() > 10f) {
                            wasDrag = true
                        }

                        if (!change.pressed) {
                            if (!wasDrag) {
                                // –¶–µ –±—É–≤ –ø—Ä–æ—Å—Ç–∏–π —Ç–∞–ø - –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –º–µ–Ω—é –≤ tap mode
                                Log.e("HOLDMENU2", "üëÜ Single tap - opening menu in tap mode")

                                val globalAnchor = buttonAnchor
                                val globalTouch = Offset(
                                    buttonAnchor.x + down.position.x - size.width / 2f,
                                    buttonAnchor.y + down.position.y - size.height / 2f
                                )

                                controller.open(
                                    anchor = globalAnchor,
                                    touch = globalTouch,
                                    items = items,
                                    onSelect = onSelect,
                                    iconPosition = iconPosition,
                                    menuAlignment = menuAlignment,
                                    isDragMode = false  // Tap mode - –º–µ–Ω—é –ø—Ä–∞—Ü—é—î —è–∫ –∑–≤–∏—á–∞–π–Ω–µ
                                )

                                // onTap –ù–ï –≤–∏–∫–ª–∏–∫–∞—î–º–æ, –±–æ –≤—ñ–¥–∫—Ä–∏–ª–∏ –º–µ–Ω—é
                            }
                            break
                        }

                        change.consume()
                    }
                }
            }
        }
    ) {
        content()
    }
}


================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Button.kt
================================================================================

## <<FILE_11>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Controller.kt (ID: FILE_11)
================================================================================

package com.romankozak.forwardappmobile.features.common.components.holdmenu2

import android.util.Log
import androidx.compose.runtime.*
import androidx.compose.ui.geometry.Offset
import androidx.compose.ui.unit.Density

@Stable
class HoldMenu2Controller {
    var state by mutableStateOf(HoldMenu2State())
        private set

    private var screenWidth: Float = 0f
    private var screenHeight: Float = 0f
    private var density: Density? = null

    fun setScreenDimensions(width: Float, height: Float, density: Density) {
        this.screenWidth = width
        this.screenHeight = height
        this.density = density
    }

    fun open(
        anchor: Offset,
        touch: Offset,
        items: List<HoldMenuItem>,
        onSelect: (Int) -> Unit,
        iconPosition: IconPosition = IconPosition.START,
        menuAlignment: MenuAlignment = MenuAlignment.START,
    ) {
        Log.e("HOLDMENU2", "üìù Controller.open() called, items=${items.size}")

        val currentDensity = density
        if (currentDensity == null || screenWidth == 0f || screenHeight == 0f) {
            Log.e("HOLDMENU2", "‚ö†Ô∏è Screen dimensions not set!")
            return
        }

        // –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ layout –º–µ–Ω—é
        val layout = HoldMenu2Geometry.calculateMenuLayout(
            anchor = anchor,
            itemCount = items.size,
            density = currentDensity,
            screenWidth = screenWidth,
            screenHeight = screenHeight,
        )

        // –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π hover
        val initialHover = HoldMenu2Geometry.calculateHoverIndex(
            fingerPosition = touch,
            layout = layout,
            itemCount = items.size,
        )

        state = state.copy(
            isOpen = true,
            anchor = anchor,
            touch = touch,
            items = items,
            onItemSelected = onSelect,
            hoverIndex = initialHover,
            layout = layout,
            iconPosition = iconPosition,
            menuAlignment = menuAlignment,
        )

        Log.e("HOLDMENU2", "üìù State updated: isOpen=${state.isOpen}, items=${state.items.size}, hover=$initialHover")
    }

    fun updateHover(fingerPosition: Offset) {
        val layout = state.layout ?: return

        val newHover = HoldMenu2Geometry.calculateHoverIndex(
            fingerPosition = fingerPosition,
            layout = layout,
            itemCount = state.items.size,
        )

        if (state.hoverIndex != newHover) {
            Log.e("HOLDMENU2", "üéØ Hover: $newHover (pos=$fingerPosition)")
            state = state.copy(hoverIndex = newHover)
        }
    }

    fun close() {
        Log.e("HOLDMENU2", "üìù Controller.close() called")
        state = state.copy(isOpen = false, hoverIndex = -1)
    }
}

@Composable
fun rememberHoldMenu2(): HoldMenu2Controller {
    return remember { HoldMenu2Controller() }
}

================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Controller.kt
================================================================================

## <<FILE_12>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Geometry.kt (ID: FILE_12)
================================================================================

package com.romankozak.forwardappmobile.features.common.components.holdmenu2

import androidx.compose.ui.geometry.Offset
import androidx.compose.ui.unit.Density
import androidx.compose.ui.unit.Dp
import androidx.compose.ui.unit.IntOffset
import androidx.compose.ui.unit.dp

/**
 * –£—Ç–∏–ª—ñ—Ç–∞ –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ø–æ–∑–∏—Ü—ñ—ó –º–µ–Ω—é –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º —Ä—ñ–∑–Ω–∏—Ö –∫—Ä–∞–π–Ω—ñ—Ö –≤–∏–ø–∞–¥–∫—ñ–≤
 */
object HoldMenu2Geometry {
    
    data class MenuLayout(
        val menuTopLeft: IntOffset,
        val menuWidth: Float,
        val menuHeight: Float,
        val itemHeight: Float,
    )
    
    /**
     * –†–æ–∑—Ä–∞—Ö–æ–≤—É—î –æ–ø—Ç–∏–º–∞–ª—å–Ω—É –ø–æ–∑–∏—Ü—ñ—é –º–µ–Ω—é –≤—ñ–¥–Ω–æ—Å–Ω–æ –∫–Ω–æ–ø–∫–∏-—è–∫–æ—Ä—è
     * 
     * @param anchor –¶–µ–Ω—Ç—Ä –∫–Ω–æ–ø–∫–∏ –≤ window coordinates
     * @param itemCount –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—É–Ω–∫—Ç—ñ–≤ –º–µ–Ω—é
     * @param density Density –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó dp –≤ px
     * @param screenWidth –®–∏—Ä–∏–Ω–∞ –µ–∫—Ä–∞–Ω—É –≤ px
     * @param screenHeight –í–∏—Å–æ—Ç–∞ –µ–∫—Ä–∞–Ω—É –≤ px
     * @param menuWidth –®–∏—Ä–∏–Ω–∞ –º–µ–Ω—é
     * @param itemHeight –í–∏—Å–æ—Ç–∞ –æ–¥–Ω–æ–≥–æ –ø—É–Ω–∫—Ç—É
     * @param gap –í—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ –∫–Ω–æ–ø–∫–∏ –¥–æ –º–µ–Ω—é
     * @param edgePadding –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –≤—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ –∫—Ä–∞—ó–≤ –µ–∫—Ä–∞–Ω—É
     */
    fun calculateMenuLayout(
        anchor: Offset,
        itemCount: Int,
        density: Density,
        screenWidth: Float,
        screenHeight: Float,
        menuWidth: Dp = 220.dp,
        itemHeight: Dp = 48.dp,
        gap: Dp = 16.dp,
        edgePadding: Dp = 8.dp,
    ): MenuLayout {
        with(density) {
            val menuWidthPx = menuWidth.toPx()
            val itemHeightPx = itemHeight.toPx()
            val menuHeightPx = itemHeightPx * itemCount
            val gapPx = gap.toPx()
            val edgePx = edgePadding.toPx()
            
            // 1. –°–ø—Ä–æ–±—É—î–º–æ —Ä–æ–∑–º—ñ—Å—Ç–∏—Ç–∏ –º–µ–Ω—é –∑–≤–µ—Ä—Ö—É –≤—ñ–¥ –∫–Ω–æ–ø–∫–∏ (preferred)
            var menuX = anchor.x - menuWidthPx / 2f
            var menuY = anchor.y - menuHeightPx - gapPx
            
            // 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—ñ
            when {
                // –ú–µ–Ω—é –≤–∏—Ö–æ–¥–∏—Ç—å –∑–∞ –≤–µ—Ä—Ö –µ–∫—Ä–∞–Ω—É - —Ä–æ–∑–º—ñ—â—É—î–º–æ –∑–Ω–∏–∑—É
                menuY < edgePx -> {
                    menuY = anchor.y + gapPx
                    
                    // –Ø–∫—â–æ —ñ –∑–Ω–∏–∑—É –Ω–µ –≤–º—ñ—â–∞—î—Ç—å—Å—è - –ø—Ä–∏—Ç–∏—Å–∫–∞—î–º–æ –¥–æ –Ω–∏–∑—É
                    if (menuY + menuHeightPx > screenHeight - edgePx) {
                        menuY = (screenHeight - menuHeightPx - edgePx).coerceAtLeast(edgePx)
                    }
                }
                // –ú–µ–Ω—é –≤–∏—Ö–æ–¥–∏—Ç—å –∑–∞ –Ω–∏–∑ –µ–∫—Ä–∞–Ω—É - –ø—Ä–∏—Ç–∏—Å–∫–∞—î–º–æ –¥–æ –Ω–∏–∑—É
                menuY + menuHeightPx > screenHeight - edgePx -> {
                    menuY = (screenHeight - menuHeightPx - edgePx).coerceAtLeast(edgePx)
                }
            }
            
            // 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—ñ
            when {
                // –ú–µ–Ω—é –≤–∏—Ö–æ–¥–∏—Ç—å –∑–∞ –ª—ñ–≤—É –º–µ–∂—É - –ø—Ä–∏—Ç–∏—Å–∫–∞—î–º–æ –¥–æ –ª—ñ–≤–æ–≥–æ –∫—Ä–∞—é
                menuX < edgePx -> {
                    menuX = edgePx
                }
                // –ú–µ–Ω—é –≤–∏—Ö–æ–¥–∏—Ç—å –∑–∞ –ø—Ä–∞–≤—É –º–µ–∂—É - –ø—Ä–∏—Ç–∏—Å–∫–∞—î–º–æ –¥–æ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—é
                menuX + menuWidthPx > screenWidth - edgePx -> {
                    menuX = (screenWidth - menuWidthPx - edgePx).coerceAtLeast(edgePx)
                }
            }
            
            return MenuLayout(
                menuTopLeft = IntOffset(menuX.toInt(), menuY.toInt()),
                menuWidth = menuWidthPx,
                menuHeight = menuHeightPx,
                itemHeight = itemHeightPx,
            )
        }
    }
    
    /**
     * –†–æ–∑—Ä–∞—Ö–æ–≤—É—î —ñ–Ω–¥–µ–∫—Å –ø—É–Ω–∫—Ç—É –º–µ–Ω—é, –Ω–∞ —è–∫–∏–π –≤–∫–∞–∑—É—î –ø–∞–ª–µ—Ü—å
     * 
     * @param fingerPosition –ü–æ–∑–∏—Ü—ñ—è –ø–∞–ª—å—Ü—è –≤ window coordinates
     * @param layout –†–æ–∑–∫–ª–∞–¥–∫–∞ –º–µ–Ω—é
     * @return –Ü–Ω–¥–µ–∫—Å –ø—É–Ω–∫—Ç—É (0..itemCount-1) –∞–±–æ -1 —è–∫—â–æ –ø–∞–ª–µ—Ü—å –ø–æ–∑–∞ –º–µ–Ω—é
     */
    fun calculateHoverIndex(
        fingerPosition: Offset,
        layout: MenuLayout,
        itemCount: Int,
    ): Int {
        val relativeX = fingerPosition.x - layout.menuTopLeft.x
        val relativeY = fingerPosition.y - layout.menuTopLeft.y
        
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ –ø–∞–ª–µ—Ü—å –≤ –º–µ–∂–∞—Ö –º–µ–Ω—é
        if (relativeX < 0 || relativeX > layout.menuWidth ||
            relativeY < 0 || relativeY > layout.menuHeight) {
            return -1
        }
        
        // –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ —ñ–Ω–¥–µ–∫—Å –ø—É–Ω–∫—Ç—É
        val index = (relativeY / layout.itemHeight).toInt()
        return index.coerceIn(0, itemCount - 1)
    }
    
    /**
     * –ü–µ—Ä–µ–≤—ñ—Ä—è—î —á–∏ –ø–æ–∑–∏—Ü—ñ—è –≤ –º–µ–∂–∞—Ö –∫–Ω–æ–ø–∫–∏ (–¥–ª—è –¥–µ—Ç–µ–∫—Ü—ñ—ó long press)
     */
    fun isInsideButton(
        position: Offset,
        buttonCenter: Offset,
        buttonRadius: Float = 100f
    ): Boolean {
        return (position - buttonCenter).getDistance() < buttonRadius
    }
}


================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Geometry.kt
================================================================================

## <<FILE_13>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Models.kt (ID: FILE_13)
================================================================================

package com.romankozak.forwardappmobile.features.common.components.holdmenu2

import androidx.compose.ui.graphics.vector.ImageVector

/**
 * –ü—É–Ω–∫—Ç –º–µ–Ω—é –∑ —ñ–∫–æ–Ω–∫–æ—é —Ç–∞ —Ç–µ–∫—Å—Ç–æ–º
 */
data class HoldMenuItem(
    val label: String,
    val icon: ImageVector? = null,
    val id: String = label,
)

/**
 * –ü–æ–∑–∏—Ü—ñ—è —ñ–∫–æ–Ω–∫–∏ –≤—ñ–¥–Ω–æ—Å–Ω–æ —Ç–µ–∫—Å—Ç—É
 */
enum class IconPosition {
    START,  // –Ü–∫–æ–Ω–∫–∞ –∑–ª—ñ–≤–∞, —Ç–µ–∫—Å—Ç —Å–ø—Ä–∞–≤–∞
    END,    // –¢–µ–∫—Å—Ç –∑–ª—ñ–≤–∞, —ñ–∫–æ–Ω–∫–∞ —Å–ø—Ä–∞–≤–∞
}

/**
 * –†–µ–∂–∏–º –≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç—É –≤ –ø—É–Ω–∫—Ç—ñ –º–µ–Ω—é
 */
enum class MenuAlignment {
    START,   // –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–∏—Ç–∏—Å–Ω—É—Ç–∏–π –¥–æ –ª—ñ–≤–æ–≥–æ –∫—Ä–∞—é
    END,     // –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–∏—Ç–∏—Å–Ω—É—Ç–∏–π –¥–æ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—é
    CENTER,  // –ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ —Ü–µ–Ω—Ç—Ä—É
}

================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Models.kt
================================================================================

## <<FILE_14>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Overlay.kt (ID: FILE_14)
================================================================================

package com.romankozak.forwardappmobile.features.common.components.holdmenu2

import android.util.Log
import androidx.compose.animation.AnimatedVisibility
import androidx.compose.animation.core.tween
import androidx.compose.animation.fadeIn
import androidx.compose.animation.fadeOut
import androidx.compose.foundation.background
import androidx.compose.foundation.layout.*
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color

@Composable
fun HoldMenu2Overlay(
    controller: HoldMenu2Controller,
    modifier: Modifier = Modifier
) {
    val state = controller.state

    AnimatedVisibility(
        visible = state.isOpen && state.items.isNotEmpty(),
        enter = fadeIn(tween(150)),
        exit = fadeOut(tween(100)),
    ) {
        Log.e("HOLDMENU2", "üìç Overlay: rendering popup")

        Box(
            modifier = modifier.background(Color.Black.copy(alpha = 0.4f))
        ) {
            HoldMenu2Popup(state)
        }
    }
}

================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Overlay.kt
================================================================================

## <<FILE_15>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Popup.kt (ID: FILE_15)
================================================================================

package com.romankozak.forwardappmobile.features.common.components.holdmenu2

import android.util.Log
import androidx.compose.animation.AnimatedVisibility
import androidx.compose.animation.core.*
import androidx.compose.animation.fadeIn
import androidx.compose.animation.fadeOut
import androidx.compose.animation.scaleIn
import androidx.compose.animation.scaleOut
import androidx.compose.foundation.background
import androidx.compose.foundation.border
import androidx.compose.foundation.clickable
import androidx.compose.foundation.interaction.MutableInteractionSource
import androidx.compose.foundation.layout.*
import androidx.compose.foundation.shape.RoundedCornerShape
import androidx.compose.material3.Icon
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.getValue
import androidx.compose.runtime.remember
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.draw.shadow
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.graphics.TransformOrigin
import androidx.compose.ui.graphics.graphicsLayer
import androidx.compose.ui.platform.LocalDensity
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.Dp
import androidx.compose.ui.unit.IntOffset
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import kotlin.compareTo
import com.romankozak.forwardappmobile.ui.theme.HoldMenuColors
import com.romankozak.forwardappmobile.ui.theme.LocalHoldMenuColors

@Composable
fun HoldMenu2Popup(
    state: HoldMenu2State,
    onItemClick: (Int) -> Unit = {}
) {
    val layout = state.layout ?: return

    Log.e("HOLDMENU2", "üé® Popup rendering, items=${state.items.size}, hover=${state.hoverIndex}, isDragMode=${state.isDragMode}")

    val density = LocalDensity.current
    val menuWidth = with(density) { layout.menuWidth.toDp() }
    val itemHeight = with(density) { layout.itemHeight.toDp() }
    val holdMenuColors = LocalHoldMenuColors.current

    val scale by animateFloatAsState(
        targetValue = if (state.isOpen) 1f else 0.92f,
                                     animationSpec = spring(
                                         dampingRatio = Spring.DampingRatioMediumBouncy,
                                         stiffness = Spring.StiffnessLow
                                     ),
                                     label = "menu_scale"
    )

    val alpha by animateFloatAsState(
        targetValue = if (state.isOpen) 1f else 0f,
                                     animationSpec = tween(150),
                                     label = "menu_alpha"
    )

    Box(
        modifier = Modifier
        .offset { layout.menuTopLeft }
        .graphicsLayer {
            this.alpha = alpha
            scaleX = scale
            scaleY = scale
            transformOrigin = TransformOrigin.Center
        }
        .width(menuWidth)
        .shadow(
            elevation = 20.dp,
            shape = RoundedCornerShape(22.dp),
                ambientColor = Color.Black.copy(alpha = 0.35f),
                spotColor = Color.Black.copy(alpha = 0.45f)
        )
        .background(
            color = holdMenuColors.background,
            shape = RoundedCornerShape(22.dp)
        )
        .border(
            width = 1.dp,
            color = holdMenuColors.border,
            shape = RoundedCornerShape(22.dp)
        )
        .padding(vertical = 8.dp)
    ) {
        Column(
            verticalArrangement = Arrangement.Top,
            horizontalAlignment = when (state.menuAlignment) {
                MenuAlignment.START -> Alignment.Start
                MenuAlignment.CENTER -> Alignment.CenterHorizontally
                MenuAlignment.END -> Alignment.End
            },
            modifier = Modifier.fillMaxWidth()
        ) {
            state.items.forEachIndexed { index, item ->
                MenuItemRow(
                    item = item,
                    isHover = index == state.hoverIndex,
                    itemHeight = itemHeight,
                    iconPosition = state.iconPosition,
                    menuAlignment = state.menuAlignment,
                    colors = holdMenuColors,
                    // –í tap mode –¥–æ–¥–∞—î–º–æ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∫–ª—ñ–∫—É
                    onClick = if (!state.isDragMode) {
                        { onItemClick(index) }
                    } else {
                        null
                    }
                )
            }
        }
    }
}


@Composable
private fun MenuItemRow(
    item: HoldMenuItem,
    isHover: Boolean,
    itemHeight: Dp,
    iconPosition: IconPosition,
    menuAlignment: MenuAlignment,
    colors: HoldMenuColors,
    onClick: (() -> Unit)? = null,
) {
    val offsetX by animateDpAsState(
        targetValue = if (isHover) 6.dp else 0.dp,
                                    animationSpec = tween(90),
                                    label = "offset"
    )

    val backgroundColor = if (isHover) colors.itemHoverBackground else Color.Transparent
    val textColor = if (isHover) colors.itemText else colors.itemTextMuted
    val fontWeight = if (isHover) FontWeight.SemiBold else FontWeight.Medium

    Box(
        modifier = Modifier
        .fillMaxWidth()
        .height(itemHeight)
        .offset(x = offsetX)
        .padding(horizontal = 6.dp, vertical = 4.dp)
        .background(backgroundColor, RoundedCornerShape(14.dp))
        .then(
            if (onClick != null) {
                // Tap mode - –¥–æ–¥–∞—î–º–æ clickable
                Modifier.clickable(
                    interactionSource = remember { MutableInteractionSource() },
                                   indication = null
                ) {
                    onClick()
                }
            } else {
                Modifier
            }
        ),
        contentAlignment = when (menuAlignment) {
            MenuAlignment.START -> Alignment.CenterStart
            MenuAlignment.END -> Alignment.CenterEnd
            MenuAlignment.CENTER -> Alignment.Center
        }
    ) {
        Row(
            horizontalArrangement = Arrangement.spacedBy(12.dp),
            verticalAlignment = Alignment.CenterVertically,
            modifier = Modifier.padding(horizontal = 14.dp)
        ) {
            if (iconPosition == IconPosition.START)
                item.icon?.let {
                    Icon(
                        imageVector = it,
                         contentDescription = null,
                         tint = textColor,
                         modifier = Modifier.size(20.dp)
                    )
                }

                Text(
                    item.label,
                     color = textColor,
                     fontSize = 15.sp,
                     fontWeight = fontWeight
                )

                if (iconPosition == IconPosition.END)
                    item.icon?.let {
                        Icon(
                            imageVector = it,
                             contentDescription = null,
                             tint = textColor,
                             modifier = Modifier.size(20.dp)
                        )
                    }
        }
    }
}


================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2Popup.kt
================================================================================

## <<FILE_16>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2State.kt (ID: FILE_16)
================================================================================

package com.romankozak.forwardappmobile.features.common.components.holdmenu2

import androidx.compose.ui.geometry.Offset

data class HoldMenu2State(
    val isOpen: Boolean = false,
    val anchor: Offset = Offset.Zero,
    val touch: Offset = Offset.Zero,
    val items: List<HoldMenuItem> = emptyList(),
    val hoverIndex: Int = -1,
    val onItemSelected: ((Int) -> Unit)? = null,
    val layout: HoldMenu2Geometry.MenuLayout? = null,
    val iconPosition: IconPosition = IconPosition.START,
    val menuAlignment: MenuAlignment = MenuAlignment.START,
)

================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/apps/android/src/main/java/com/romankozak/forwardappmobile/features/common/components/holdmenu2/HoldMenu2State.kt
================================================================================

## <<FILE_17>>
================================================================================
BEGIN FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/docs/HoldMenu2-manual.md (ID: FILE_17)
================================================================================

# HoldMenu2 - Long Press Menu with Drag Selection

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–µ–Ω—é, —è–∫–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –ø—Ä–∏ —Ç—Ä–∏–≤–∞–ª–æ–º—É –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ —Ç–∞ –¥–æ–∑–≤–æ–ª—è—î –≤–∏–±–∏—Ä–∞—Ç–∏ –ø—É–Ω–∫—Ç–∏ –ø–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–Ω—è–º –ø–∞–ª—å—Ü—è.

## –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è** - –º–µ–Ω—é –∑–∞–≤–∂–¥–∏ –≤–º—ñ—â—É—î—Ç—å—Å—è –Ω–∞ –µ–∫—Ä–∞–Ω—ñ  
‚úÖ **Drag-to-select** - –≤–∏–±—ñ—Ä –ø—É–Ω–∫—Ç—É –ø–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–Ω—è–º –±–µ–∑ –≤—ñ–¥—Ä–∏–≤—É –ø–∞–ª—å—Ü—è  
‚úÖ **Responsive hover** - –≤—ñ–∑—É–∞–ª—å–Ω–∏–π feedback –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ  
‚úÖ **iOS-style tooltip** - —Å–ø–ª–∏–≤–∞—é—á–∞ –ø—ñ–¥–∫–∞–∑–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ —è–∫ –≤ iOS  
‚úÖ **–Ü–∫–æ–Ω–∫–∏ –≤ –º–µ–Ω—é** - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —ñ–∫–æ–Ω–æ–∫ –∑ –≥–Ω—É—á–∫–∏–º —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è–º  
‚úÖ **–ê–Ω—ñ–º–∞—Ü—ñ—ó** - –ø–ª–∞–≤–Ω–∞ –ø–æ—è–≤–∞/–∑–Ω–∏–∫–Ω–µ–Ω–Ω—è –º–µ–Ω—é —Ç–∞ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤  
‚úÖ **Single tap support** - –æ–±—Ä–æ–±–∫–∞ –æ–¥–∏–Ω–∞—Ä–Ω–∏—Ö —Ç–∞–ø—ñ–≤ –æ–∫—Ä–µ–º–æ –≤—ñ–¥ long press  
‚úÖ **Edge cases handling** - –∫–æ—Ä–µ–∫—Ç–Ω–∞ —Ä–æ–±–æ—Ç–∞ –Ω–∞ –∫—Ä–∞—è—Ö –µ–∫—Ä–∞–Ω—É  
‚úÖ **–ü–æ–≤–Ω–∞ —ñ–Ω–∫–∞–ø—Å—É–ª—è—Ü—ñ—è** - –≤—Å—è –ª–æ–≥—ñ–∫–∞ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–æ—Å—Ç–∏–π –ø—Ä–∏–∫–ª–∞–¥

```kotlin
@Composable
fun MyScreen() {
    val holdMenu = rememberHoldMenu2()
    
    val menuItems = listOf(
        HoldMenuItem("Edit", Icons.Default.Edit),
        HoldMenuItem("Delete", Icons.Default.Delete),
        HoldMenuItem("Share", Icons.Default.Share),
        HoldMenuItem("Copy", Icons.Default.ContentCopy),
    )
    
    Box(Modifier.fillMaxSize()) {
        // –í–∞—à –∫–æ–Ω—Ç–µ–Ω—Ç
        
        // –ö–Ω–æ–ø–∫–∞ –∑ –º–µ–Ω—é
        HoldMenu2Button(
            items = menuItems,
            onSelect = { index ->
                when (index) {
                    0 -> onEdit()
                    1 -> onDelete()
                    2 -> onShare()
                    3 -> onCopy()
                }
            },
            onTap = {
                // –û–±—Ä–æ–±–∫–∞ –æ–¥–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ç–∞–ø—É
                println("Single tap!")
            },
            modifier = Modifier
                .align(Alignment.BottomEnd)
                .padding(16.dp)
                .size(56.dp)
        ) {
            Icon(Icons.Default.MoreVert, "Menu")
        }
        
        // Overlay –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–µ–Ω—é
        HoldMenu2Overlay(
            controller = holdMenu,
            modifier = Modifier
                .fillMaxSize()
                .zIndex(999f)
        )
    }
}
```

### –ó —ñ–∫–æ–Ω–∫–∞–º–∏ —Å–ø—Ä–∞–≤–∞

```kotlin
HoldMenu2Button(
    items = menuItems,
    onSelect = { index -> /* ... */ },
    iconPosition = IconPosition.END,  // –Ü–∫–æ–Ω–∫–∏ —Å–ø—Ä–∞–≤–∞
    menuAlignment = MenuAlignment.END, // –ö–æ–Ω—Ç–µ–Ω—Ç —Å–ø—Ä–∞–≤–∞
    modifier = Modifier.size(48.dp)
) {
    Text("Menu")
}
```

### –ë–µ–∑ —ñ–∫–æ–Ω–æ–∫

```kotlin
val menuItems = listOf(
    HoldMenuItem("Option 1"), // –ë–µ–∑ —ñ–∫–æ–Ω–∫–∏
    HoldMenuItem("Option 2"),
    HoldMenuItem("Option 3"),
)
```

## –ù–æ–≤—ñ —Ñ—ñ—á—ñ

### 1. –Ü–∫–æ–Ω–∫–∏ –≤ –º–µ–Ω—é

```kotlin
data class HoldMenuItem(
    val label: String,
    val icon: ImageVector? = null,  // –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞ —ñ–∫–æ–Ω–∫–∞
    val id: String = label,
)
```

### 2. –ì–Ω—É—á–∫–µ —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è

```kotlin
enum class IconPosition {
    START,  // üé® –Ü–∫–æ–Ω–∫–∞ –∑–ª—ñ–≤–∞, —Ç–µ–∫—Å—Ç —Å–ø—Ä–∞–≤–∞
    END,    // –¢–µ–∫—Å—Ç –∑–ª—ñ–≤–∞, —ñ–∫–æ–Ω–∫–∞ —Å–ø—Ä–∞–≤–∞ üé®
}

enum class MenuAlignment {
    START,   // –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–∏—Ç–∏—Å–Ω—É—Ç–∏–π –¥–æ –ª—ñ–≤–æ–≥–æ –∫—Ä–∞—é
    END,     // –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–∏—Ç–∏—Å–Ω—É—Ç–∏–π –¥–æ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—é
    CENTER,  // –ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ —Ü–µ–Ω—Ç—Ä—É
}
```

### 3. –û–±—Ä–æ–±–∫–∞ –æ–¥–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ç–∞–ø—É

```kotlin
HoldMenu2Button(
    items = menuItems,
    onSelect = { index -> /* Long press menu */ },
    onTap = { /* Single tap action */ },
    longPressDuration = 400, // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ
) {
    Icon(Icons.Default.MoreVert, "Menu")
}
```

### 4. iOS-style tooltip

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ –Ω–∞ –ø—É–Ω–∫—Ç –º–µ–Ω—é - –ø–ª–∞–≤–∞—é—á–∞ –ø—ñ–¥–∫–∞–∑–∫–∞ —Å–ø—Ä–∞–≤–∞ –≤—ñ–¥ –º–µ–Ω—é.

### 5. –ê–Ω—ñ–º–∞—Ü—ñ—ó

- **–ú–µ–Ω—é**: Spring –∞–Ω—ñ–º–∞—Ü—ñ—è –ø–æ—è–≤–∏ –∑ scale + fade
- **–ü—É–Ω–∫—Ç–∏**: Smooth hover effect –∑ scale + color
- **Tooltip**: Fade in/out –∑ spring bounce
- **–§–æ–Ω**: Fade in/out –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—è

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

1. **HoldMenu2Button** - –≥–æ–ª–æ–≤–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç-–∫–Ω–æ–ø–∫–∞
2. **HoldMenu2Controller** - –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Å—Ç–∞–Ω–æ–º –º–µ–Ω—é
3. **HoldMenu2Overlay** - –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–µ–Ω—é –ø–æ–≤–µ—Ä—Ö –∫–æ–Ω—Ç–µ–Ω—Ç—É
4. **HoldMenu2Popup** - –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –º–µ–Ω—é –∑ –∞–Ω—ñ–º–∞—Ü—ñ—è–º–∏
5. **HoldMenu2Geometry** - —É—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ø–æ–∑–∏—Ü—ñ—ó
6. **HoldMenu2State** - —Å—Ç–∞–Ω –º–µ–Ω—é
7. **HoldMenuItem** - –º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö –ø—É–Ω–∫—Ç—É –º–µ–Ω—é

### –ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª

```
1. –ü–∞–ª–µ—Ü—å –Ω–∞ –∫–Ω–æ–ø—Ü—ñ
   ‚Üì
2a. Long press (400ms) ‚Üí –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–µ–Ω—é
   ‚Üì
3. Drag –ø–∞–ª—å—Ü–µ–º ‚Üí –æ–Ω–æ–≤–ª–µ–Ω–Ω—è hover + tooltip
   ‚Üì
4. –í—ñ–¥–ø—É—Å–∫–∞–Ω–Ω—è ‚Üí –≤–∏–∫–æ–Ω–∞–Ω–Ω—è action

2b. –ö–æ—Ä–æ—Ç–∫–∏–π —Ç–∞–ø ‚Üí onTap()
```

## API Reference

### HoldMenu2Button

```kotlin
@Composable
fun HoldMenu2Button(
    items: List<HoldMenuItem>,        // –ü—É–Ω–∫—Ç–∏ –º–µ–Ω—é –∑ —ñ–∫–æ–Ω–∫–∞–º–∏
    onSelect: (Int) -> Unit,          // Callback –ø—Ä–∏ –≤–∏–±–æ—Ä—ñ
    modifier: Modifier = Modifier,
    controller: HoldMenu2Controller = rememberHoldMenu2(),
    longPressDuration: Long = 400,    // –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å —É—Ç—Ä–∏–º–∞–Ω–Ω—è (–º—Å)
    onTap: (() -> Unit)? = null,      // Callback –¥–ª—è –æ–¥–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ç–∞–ø—É
    iconPosition: IconPosition = IconPosition.START,
    menuAlignment: MenuAlignment = MenuAlignment.START,
    content: @Composable () -> Unit   // –í–º—ñ—Å—Ç –∫–Ω–æ–ø–∫–∏
)
```

### HoldMenuItem

```kotlin
data class HoldMenuItem(
    val label: String,
    val icon: ImageVector? = null,
    val id: String = label,
)
```

### IconPosition & MenuAlignment

```kotlin
enum class IconPosition { START, END }
enum class MenuAlignment { START, END, CENTER }
```

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### 1. –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–µ –º–µ–Ω—é –¥–ª—è —Å–ø–∏—Å–∫—É

```kotlin
@Composable
fun ListItem(item: Item) {
    val holdMenu = rememberHoldMenu2()
    
    Box {
        // –ö–æ–Ω—Ç–µ–Ω—Ç
        Text(item.title)
        
        // –ú–µ–Ω—é
        HoldMenu2Button(
            items = listOf(
                HoldMenuItem("–†–µ–¥–∞–≥—É–≤–∞—Ç–∏", Icons.Default.Edit),
                HoldMenuItem("–í–∏–¥–∞–ª–∏—Ç–∏", Icons.Default.Delete),
            ),
            onSelect = { index ->
                when (index) {
                    0 -> editItem(item)
                    1 -> deleteItem(item)
                }
            },
            modifier = Modifier.align(Alignment.CenterEnd)
        ) {
            Icon(Icons.Default.MoreVert, null)
        }
        
        HoldMenu2Overlay(holdMenu, Modifier.fillMaxSize())
    }
}
```

### 2. –®–≤–∏–¥–∫—ñ –¥—ñ—ó –≤ —á–∞—Ç—ñ

```kotlin
@Composable
fun ChatMessage(message: Message) {
    val quickActions = listOf(
        HoldMenuItem("–í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏", Icons.Default.Reply),
        HoldMenuItem("–ü–µ—Ä–µ—Å–ª–∞—Ç–∏", Icons.Default.Forward),
        HoldMenuItem("–ö–æ–ø—ñ—é–≤–∞—Ç–∏", Icons.Default.ContentCopy),
        HoldMenuItem("–í–∏–¥–∞–ª–∏—Ç–∏", Icons.Default.Delete),
    )
    
    HoldMenu2Button(
        items = quickActions,
        onSelect = { handleAction(it, message) },
        onTap = { openMessage(message) }, // –û–¥–∏–Ω–∞—Ä–Ω–∏–π —Ç–∞–ø - –≤—ñ–¥–∫—Ä–∏—Ç–∏
        iconPosition = IconPosition.END,
    ) {
        MessageBubble(message)
    }
}
```

### 3. –ù–∞–≤—ñ–≥–∞—Ü—ñ–π–Ω—ñ actions

```kotlin
@Composable
fun NavigationMenu() {
    val navItems = listOf(
        HoldMenuItem("–ì–æ–ª–æ–≤–Ω–∞", Icons.Default.Home),
        HoldMenuItem("–ü–æ—à—É–∫", Icons.Default.Search),
        HoldMenuItem("–ü—Ä–æ—Ñ—ñ–ª—å", Icons.Default.Person),
        HoldMenuItem("–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è", Icons.Default.Settings),
    )
    
    HoldMenu2Button(
        items = navItems,
        onSelect = { navigateTo(it) },
        iconPosition = IconPosition.START,
        menuAlignment = MenuAlignment.START,
    ) {
        Icon(Icons.Default.Menu, "Navigation")
    }
}
```

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å—Ç–∏–ª—é

### –ö–æ–ª—å–æ—Ä–∏ –º–µ–Ω—é

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `HoldMenu2Popup.kt`:

```kotlin
// –§–æ–Ω –º–µ–Ω—é
.background(Color(0xFF2A2A2A), RoundedCornerShape(20.dp))

// Hover background
.background(if (isHover) Color(0xFF3A3A3A) else Color.Transparent)

// Tooltip background
.background(Color(0xFF4A4A4A), RoundedCornerShape(12.dp))

// –ö–æ–ª—ñ—Ä —Ç–µ–∫—Å—Ç—É
val textColor = if (isHover) Color.White else Color(0xFFCCCCCC)
```

### –ê–Ω—ñ–º–∞—Ü—ñ—ó

```kotlin
// –®–≤–∏–¥–∫—ñ—Å—Ç—å –∞–Ω—ñ–º–∞—Ü—ñ–π
val scale = animateFloatAsState(
    targetValue = if (isHover) 1.05f else 1f,
    animationSpec = spring(
        dampingRatio = Spring.DampingRatioMediumBouncy,
        stiffness = Spring.StiffnessMedium
    )
)
```

### –†–æ–∑–º—ñ—Ä–∏

```kotlin
val layout = HoldMenu2Geometry.calculateMenuLayout(
    menuWidth = 220.dp,      // –®–∏—Ä–∏–Ω–∞ –º–µ–Ω—é
    itemHeight = 48.dp,      // –í–∏—Å–æ—Ç–∞ –ø—É–Ω–∫—Ç—É
    gap = 16.dp,            // –í—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ –∫–Ω–æ–ø–∫–∏
    edgePadding = 8.dp,     // –ú—ñ–Ω. –≤—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ –∫—Ä–∞—ó–≤
)
```

## Best Practices

1. ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `remember` –¥–ª—è `menuItems` —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ —Ä–µcomposition
2. ‚úÖ –ü–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ `onTap` —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –æ–¥–∏–Ω–∞—Ä–Ω–∏—Ö —Ç–∞–ø—ñ–≤
3. ‚úÖ –ì—Ä—É–ø—É–π—Ç–µ —Å—Ö–æ–∂—ñ –¥—ñ—ó —Ä–∞–∑–æ–º –¥–ª—è –∫—Ä–∞—â–æ–≥–æ UX
4. ‚úÖ –ù–µ —Ä–æ–±—ñ—Ç—å –º–µ–Ω—é –¥–æ–≤—à–∏–º –∑–∞ 6-7 –ø—É–Ω–∫—Ç—ñ–≤
5. ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —ñ–∫–æ–Ω–∫–∏ –¥–ª—è —à–≤–∏–¥—à–æ–≥–æ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –¥—ñ–π
6. ‚ùå –ù–µ –º—ñ–Ω—è–π—Ç–µ `items` –ø—ñ–¥ —á–∞—Å –≤—ñ–¥–∫—Ä–∏—Ç–æ–≥–æ –º–µ–Ω—é

## Troubleshooting

### iOS tooltip –Ω–µ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è

- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ hover –ø—Ä–∞—Ü—é—î (–ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏)
- Tooltip –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ `hoverIndex >= 0`

### –ê–Ω—ñ–º–∞—Ü—ñ—ó –≥–∞–ª—å–º—É—é—Ç—å

- –ó–º–µ–Ω—à—ñ—Ç—å `stiffness` –≤ spring animations
- –°–ø—Ä–æ—Å—Ç—ñ—Ç—å `content` –∫–Ω–æ–ø–∫–∏

### –ú–µ–Ω—é –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –Ω–∞ –æ–¥–∏–Ω–∞—Ä–Ω–∏–π —Ç–∞–ø

- –ó–±—ñ–ª—å—à—Ç–µ `longPressDuration` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ –¥–æ 500ms)
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –Ω–µ –±–ª–æ–∫—É—é—Ç—å —ñ–Ω—à—ñ gesture detectors

================================================================================
END FILE: /home/romankozak/studio/public/forwardapp-suit/forwardapp-android/docs/HoldMenu2-manual.md
================================================================================

