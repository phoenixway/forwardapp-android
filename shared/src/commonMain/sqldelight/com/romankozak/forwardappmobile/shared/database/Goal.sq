import kotlin.Boolean;
import kotlin.collections.List;
import com.romankozak.forwardappmobile.shared.data.database.models.RelatedLink;
import kotlin.Long;
import kotlin.Float;
import kotlin.Int;
import kotlin.String;

-- ============================================
-- üìå TABLE: Goals
-- ============================================
CREATE TABLE Goals (
    id TEXT AS String NOT NULL PRIMARY KEY,
    text TEXT AS String NOT NULL,                     -- –ù–∞–∑–≤–∞/—Ç–µ–∫—Å—Ç —Ü—ñ–ª—ñ
    description TEXT AS String,                       -- –û–ø–∏—Å (–º–æ–∂–µ –±—É—Ç–∏ NULL)
    completed INTEGER AS kotlin.Boolean NOT NULL DEFAULT 0,  -- true/false —è–∫ 1/0
    createdAt INTEGER AS kotlin.Long NOT NULL,             -- timestamp (Long)
    updatedAt INTEGER AS kotlin.Long,                      -- timestamp –∞–±–æ NULL
    tags TEXT AS List<String>,                              -- raw string –∞–±–æ JSON (—è–∫—â–æ —Ç—Ä–µ–±–∞)
    relatedLinks TEXT AS List<RelatedLink>,   -- ‚úÖ –ø—Ä–æ—Å—Ç–æ TEXT
    valueImportance REAL AS kotlin.Float NOT NULL DEFAULT 0.0,
    valueImpact REAL AS kotlin.Float NOT NULL DEFAULT 0.0,
    effort REAL AS kotlin.Float NOT NULL DEFAULT 0.0,
    cost REAL AS kotlin.Float NOT NULL DEFAULT 0.0,
    risk REAL AS kotlin.Float NOT NULL DEFAULT 0.0,
    weightEffort REAL AS kotlin.Float NOT NULL DEFAULT 1.0,
    weightCost REAL AS kotlin.Float NOT NULL DEFAULT 1.0,
    weightRisk REAL AS kotlin.Float NOT NULL DEFAULT 1.0,
    rawScore REAL AS kotlin.Float NOT NULL DEFAULT 0.0,
    displayScore INTEGER AS kotlin.Int NOT NULL DEFAULT 0,
    scoringStatus TEXT AS String NOT NULL,
    parentValueImportance REAL AS kotlin.Float,
    impactOnParentGoal REAL AS kotlin.Float,
    timeCost REAL AS kotlin.Float,
    financialCost REAL AS kotlin.Float,
    markdown TEXT AS String
);

-- ============================================
-- ‚úÖ INSERT
-- ============================================
insertGoal:
INSERT INTO Goals (
    id, text, description, completed,
    createdAt, updatedAt,
    tags, relatedLinks,
    valueImportance, valueImpact, effort, cost, risk,
    weightEffort, weightCost, weightRisk,
    rawScore, displayScore,
    scoringStatus,
    parentValueImportance, impactOnParentGoal,
    timeCost, financialCost, markdown
)
VALUES (
    :id, :text, :description, :completed,
    :createdAt, :updatedAt,
    :tags, :relatedLinks,
    :valueImportance, :valueImpact, :effort, :cost, :risk,
    :weightEffort, :weightCost, :weightRisk,
    :rawScore, :displayScore,
    :scoringStatus,
    :parentValueImportance, :impactOnParentGoal,
    :timeCost, :financialCost, :markdown
);

-- ============================================
-- ‚úÖ UPDATE
-- ============================================
updateGoal:
UPDATE Goals SET
    text = :text,
    description = :description,
    completed = :completed,
    updatedAt = :updatedAt,
    tags = :tags,
    relatedLinks = :relatedLinks,
    valueImportance = :valueImportance,
    valueImpact = :valueImpact,
    effort = :effort,
    cost = :cost,
    risk = :risk,
    weightEffort = :weightEffort,
    weightCost = :weightCost,
    weightRisk = :weightRisk,
    rawScore = :rawScore,
    displayScore = :displayScore,
    scoringStatus = :scoringStatus,
    parentValueImportance = :parentValueImportance,
    impactOnParentGoal = :impactOnParentGoal,
    timeCost = :timeCost,
    financialCost = :financialCost,
    markdown = :markdown
WHERE id = :id;

-- ============================================
-- ‚úÖ DELETE
-- ============================================
deleteGoal:
DELETE FROM Goals WHERE id = :id;

deleteAll:
DELETE FROM Goals;

-- ============================================
-- ‚úÖ SELECT: BY ID
-- ============================================
getGoalById:
SELECT * FROM Goals WHERE id = :id;

-- ============================================
-- ‚úÖ SELECT: ALL
-- ============================================
getAllGoals:
SELECT * FROM Goals ORDER BY createdAt DESC;

-- ============================================
-- ‚úÖ SELECT: BY IDs
-- ============================================
getGoalsByIds:
SELECT * FROM Goals WHERE id IN :ids;

-- ============================================
-- ‚úÖ SEARCH
-- ============================================
searchGoalsByText:
SELECT * FROM Goals WHERE text LIKE '%' || :query || '%' OR description LIKE '%' || :query || '%';

-- ============================================
-- ‚úÖ COUNT
-- ============================================
getAllGoalsCount:
SELECT count(*) FROM Goals;

-- ============================================
-- ‚úÖ UPDATE MARKDOWN
-- ============================================
updateMarkdown:
UPDATE Goals SET markdown = :markdown WHERE id = :goalId;
