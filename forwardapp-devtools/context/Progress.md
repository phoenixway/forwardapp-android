# Прогрес роботи над синхронізацією вкладень

## 02.12.2024

###診斷проблеми
- Виявлено, що при синхронізації `attachments=0` у логах, хоча дані мають вкладення
- Нотатки, створені на Android, пропадають при синхронізації
- Вкладення не синхронізуються між пристроями
- Всього в бібіотеці вкладень 476 проектів, але вкладення = 0

### Додано контрольне логування
1. **SyncRepository.kt**:
   - В методі `getChangesSince()`: логування фільтрації вкладень з показом их фактичної кількості та параметрів
   - В методі `applyServerChanges()`: логування обробки вкладень на входження і після merge

2. **AttachmentRepository.kt**:
   - В методі `ensureAttachmentForEntity()`: логування при створенні та знаходженні вкладень  
   - В методі `createLinkAttachment()`: детальне логування всіх трьох операцій (LinkItemEntity, AttachmentEntity, CrossRef)

### Статус
✅ Код скомпільований успішно
⏳ Ожидание встановлення на пристрій для тестування

### Наступні кроки
1. Встановити APK на Android пристрій
2. Запустити синхронізацію і зібрати логи
3. Проаналізувати логи для знаходження точного місця втрати вкладень
4. Виправити кореневу причину
