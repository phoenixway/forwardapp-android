# CONTEXT.md
Документ оперативної пам'яті для агента розробки.
Використовується в кожній сесії.

---

## 1. Поточне завдання (CURRENT TASK)
- екран проекту. вид беклогу. свайпи над цілями і підпроектами
- правий свайп. замість дії "Add reminder" постав дію ReminderProperties
  
## 3. План дій
---

## 4. Невирішені проблеми / Блокери (PROBLEMS)
---

## 5. Значимі файли і модулі (IMPORTANT FILES / MODULES)
---

## 6. Інструкції та вимоги до стилю (INSTRUCTIONS)

- Не переписувати архітектуру без підтвердження  
- Виконувати лише один крок за раз  
- Не змінювати DI без дозволу  
- Додавати пропозицію оновлення контексту після кожної дії  
- Писати код, що точно компілюється  
- Завжди пояснювати причину помилки  

---

## 7. Замітки для агента (NOTES)
- обов'язково перечитай весь вміст папки docs

---

## 8. Після цього
• Огляд поточного стану (фокус на стабільних фічах і готовності до продакшн):

  - Релізна збірка зараз не готова до стора: у app/build.gradle.kts release
    використовує відкритий keystore із паролем у коді, isMinifyEnabled=false,
    версія 10.0-alpha1; дублікати залежностей (дві версії onnxruntime, двічі
    retrofit) роздувають APK і ускладнюють діагностику.
  - Експериментальні можливості (AI/Attachments/Wi‑Fi sync/Strategy/
    Planning modes) за замовчуванням вимкнені в проді: FeatureToggles й
    SettingsRepository підставляють BuildConfig.DEBUG=false, тож користувач
    бачитиме лише основні флоу backlog/планування/нагадування/трекер/нотатки/
    чеклісти.
  - Основні флоу зібрані в routes/AppNavigation.kt і MainScreenViewModel:
    беклог/план на день/трекинг/нагадування/просто текстові нотатки
    (NoteDocument) та чеклісти інтегровані; є Crashlytics/Analytics. Виглядає
    зріло, але немає видимої розмежованої прод- vs debug-конфігурації, тож
    експериментальні сервіси й моделі AI все одно пакуються в реліз.
  - Дані: Room база версії 67, останні міграції додають attachments, system
    projects/system apps і переносять нотатки/чеклісти (Migrations.kt), а
    DatabaseInitializer створює системні проєкти. Це потрібно прогнати через
    апгрейд-тести зі старих версій, інакше є ризик крашу при оновленні.
  - Безпека/політики: AndroidManifest.xml має usesCleartextTraffic="true",
    android:allowBackup="true", SYSTEM_ALERT_WINDOW/DISABLE_KEYGUARD/
    USE_FULL_SCREEN_INTENT — усе це викличе питання в сторах і потребує або
    відключення, або чіткого UX-просвітлення/пояснення.
  - Якість/тести: є кілька юніт-тестів (PlanningUseCase, HierarchyStateBuilder
    тощо), але повного покриття core-флоу немає; у цій сесії збірки/тести не
    запускалися через sandbox.

  Що робити далі:

  1. За межами sandbox прогнати ./gradlew :app:assembleRelease + юніт/
     інструментальні тести та перевірити міграції на продовжених базах.
  2. Замінити релізний keystore і приховати секрети, увімкнути R8/ProGuard,
     почистити дублікати залежностей і виставити прод-версію/код.
  3. Провести security review: вимкнути cleartext, переглянути небезпечні
     permissions, відокремити/вирізати експериментальні AI/Sync бібліотеки з
     прод-флейвора.
  4. Перевірити UX дозволів для нагадувань/алярмів/foreground service, щоб
<!--      пройти стор-реліз без блокерів. -->
--- 

