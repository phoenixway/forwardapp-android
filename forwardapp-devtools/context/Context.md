# CONTEXT.md
Документ оперативної пам'яті для агента розробки.
Використовується в кожній сесії.

---

## 1. Поточне завдання (CURRENT TASK)
синхронізація вр

### що є
- є android версія додатку, 
- є десктоп версія додатку. 
- android версія додатку є джерелом правди. 
- зокрема щодо формату json повного бекапу
- версії додатків мають різну архітектуру. часто міняються моделі БД. через це синхронізація між додатками - постійне джерело проблем і багів.
- з вкладеннями (attachments) є специфіка. в андроїд версії зокрема. щоб зрозуміти в чому вона достатньо подивитися як отримуються вкладення в ui бібліотеці вкладень. там з join таблиці. 
- є так звані системні проекти і вкладення. вони мають бути однозначно ідентифіковані через системні ключі. при імпорті має відбуватися коректне оновлення цих сутностей. а не так як зараз коли створюються дублікати при вибірковому імпорті сервіс неправильний метод ініціалізації даних який думає що системних сутностей немає і перетворює їх заново при тому що вони існують.

### цілі
- працюємо поки тільки з андроїд версією додатку 
- Я хотів би зробити щоб android додаток міг імпортувати такого самого формату json файли.
- варіанти імпорту 
      - повністю (заміняє все що було до цього) 
      - вибірково, тобто користувачу показується екран імпорту з можливістю вмикати вимикати конкретні зміни для синхронізації між різними версіями додатку. 
- ці варіанти мають бути присутні в меню на головному екрані 
- а краще зробити окремий діалог з іконками або bottomsheet для імпорту експорту і додати туди всі доступні дії і фічі
- забезпечити імпорт - експорт всіх сутностей. проектів, вкладень, скриптів, тд
- розглянути покращення моделі БД щодо вкладень 
- придумати спосіб уніфікувати формат json для всіх типів додатків. чи якусь єдину незмінну специфікацію розробити чи щось подібне. з жорсткими версіями. і вичерпним формальним описом який можна надати зокрема для розробки десктоп додатку
- треба уважно покрити тестами всі аспекти імпорту-експорту так щоб отримати супер-надійну фічу.


## 3. План дій
---

## 4. Невирішені проблеми / Блокери (PROBLEMS)
---

## 5. Значимі файли і модулі (IMPORTANT FILES / MODULES)
---

## 6. Інструкції та вимоги до стилю (INSTRUCTIONS)

- Не переписувати архітектуру без підтвердження  
- Виконувати лише один крок за раз  
- Не змінювати DI без дозволу  
- Додавати пропозицію оновлення контексту після кожної дії  
- Писати код, що точно компілюється  
- Завжди пояснювати причину помилки  

---

## 7. Замітки для агента (NOTES)

---

## 8. Після цього

--- 

