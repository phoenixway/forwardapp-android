## 1. Поточне завдання (CURRENT TASK)
  у мене своєрідна система вкладень. задіяні таблиці нотаток, чеклістів, власне вкладень, посилань на них і ще бог знає чого. поточний код не
  синхронізує вкладення так як потрібно. в бібіотеці вкладень в анроїд версії було 106 вкладень. після синхронізації - 12. на анроїді роблю в
  проекті нову нотатку - не синхронізується на десктоп і пропадає з аедроїда. на десктопі при створенні нотатки вона існує локально а на андроїді
  її нема. з цим всім треба розібратися. ймовірно треба весь процес від створення вкладення будьякого типу до кінця синхронізації покрити контрольними
  логами щоб дізнатися де глюки. на андроїді створюю нотатку. при синхронізації вона пропадає.

відкриваю вкладення проекту на андр. 6 з 8 тих які є на десктопі. проходить кілька секунд - 0 вкладень. ще час проходить - 3 вкладення. ще час прозодить - 0. створюю 
нотатку - при синку пропадає з усіма іншими. наступний синк - 3 вкл але не та яку я стврив. на десктопі 9 включаючи новостворену 

Пропоную по всьому шляху проблемного функціоналу зробити наступне:
- наскільки це можливо винести важливий код в чисті функції
- максимально покрити їх юніт тестами з логами. Включаючи логи того що на вході і що на виході. Якщо великий об'єм логів можна в файли їх писати. 
- те що залежить від БД і мережевих повідомлень з десктопа просто дуже детально логувати також. 
- так ми будемо бачити чи наші тестовані функції дають не те, чи не те дається на їх вході чи з мережі. І можна буде дуже чітко бачити на якому етапі йде збій. 
- можна навіть зробити посилену валідацію входів і виходів функцій. Щоб зразу в логах було видно що йде не так

Тоді буде так 
- запускаємо юніт тести. 
- Якщо не ок - правимо чисті функції в зв'язаний функціонал. 
- якщо ок - запускаємо додаток, проганяємо проблемну ситуацію і дивимося логи

Можливо навіть написати інтеграційні тести щоб бачити автоматично чи конвеєр працює нормально, але це складно і об'ємно
Можна проміжний варіант. Тестова БД в пам'яті. Перевіряємо як наш конвеєр обробляє її тестові дані . Чи генерує нормальний експорт. Чи нормально обробляє імпорт

## 3. План дій


## 4. Невирішені проблеми / Блокери (PROBLEMS)

## 5. Значимі файли і модулі (IMPORTANT FILES / MODULES)

## 6. Інструкції та вимоги до стилю (INSTRUCTIONS)

- Не переписувати архітектуру без підтвердження  
- Виконувати лише один крок за раз  
- Не змінювати DI без дозволу  
- Додавати пропозицію оновлення контексту після кожної дії  
- Писати код, що точно компілюється  
- Завжди пояснювати причину помилки  

---

## 7. Замітки для агента (NOTES)
- ідеї в SYNAPSE_DESIGN.md, SYNC_FEATURE_SPEC.md
- спочатку почитати файли з папки docs

---

## 8. Після цього
- Можна прибрати додане логування з `GoalRepository` та `SyncRepository`.
---